{"version":3,"file":"xc-wizard.js.map","sources":["ng://xc-wizard/lib/storage.helper.ts","ng://xc-wizard/lib/wizard.component.ts","ng://xc-wizard/lib/wizard.module.ts"],"sourcesContent":["export class LocalStorageHelper {\n  static store(key: string, value: any) {\n    if (window.localStorage) {\n      try {\n        localStorage.setItem(key, JSON.stringify(value));\n      } catch (e) {\n        console.log('no storage');\n      }\n    }\n  }\n\n  static get(key: string) {\n    if (window.localStorage) {\n      try {\n        return localStorage.getItem(key);\n      } catch (e) {\n        return null;\n      }\n    }\n  }\n\n  static remove(key: string) {\n    if (window.localStorage) {\n      try {\n        localStorage.removeItem(key);\n      } catch (e) {\n        console.log('no storage');\n      }\n    }\n  }\n\n  static clearAll() {\n    if (window.localStorage) {\n      try {\n        localStorage.clear();\n      } catch (e) {\n        console.log('no storage');\n      }\n    }\n  }\n\n}\n","import { Component, OnInit, Input, OnChanges, SimpleChanges, OnDestroy, ViewEncapsulation,\n  ViewChild, Output, EventEmitter } from '@angular/core';\nimport { merge, cloneDeep } from 'lodash-es';\nimport { fromEvent } from 'rxjs';\nimport { NzCarouselComponent } from 'ng-zorro-antd';\nimport { LocalStorageHelper } from './storage.helper';\n\nexport interface WizardConfig {\n  steps: Step[];\n  scroller?: HTMLElement;\n  skipForever?: boolean;\n  skipKey?: string;\n  boundaryWidth?: number;\n  scrollTopOffset?: number;\n  scrollBottomOffset?: number;\n  tipWidth?: number;\n  tipHeight?: number;\n  priority?: TipDirection[];\n}\n\nexport interface Step {\n  id: string;\n  title: string;\n  content: string;\n  next?: () => void;\n  prev?: () => void;\n}\n\nexport enum TipDirection {\n  TOP = 0, RIGHT = 1, BOTTOM = 2, LEFT = 3\n}\n\nconst defaultConfig = {\n  steps: undefined, skipForever: true, skipKey: 'skipWizard', boundaryWidth: 15, scrollTopOffset: 0, scrollBottomOffset: 0,\n  scroller: document.body, tipHeight: 180, tipWidth: 320, priority: [2, 0, 1, 3]\n};\n\n@Component({\n  selector: 'lib-wizard',\n  templateUrl: './wizard.component.html',\n  styleUrls: ['./wizard.component.scss'],\n  encapsulation: ViewEncapsulation.None\n})\nexport class WizardComponent implements OnInit, OnChanges, OnDestroy {\n\n  @Input() config: WizardConfig;\n\n  @Output() stepChange = new EventEmitter<{\n    prev: number; next: number\n  }>();\n\n  @ViewChild(NzCarouselComponent) carousel: any;\n\n  private position: TipDirection;\n\n  private arrowWidth = 15;\n\n  private _noWizard = true;\n  private current = 0;\n  private retryCount = 0;\n\n  private detector: any;\n  private domStyle: any;\n  private tipStyle: any;\n\n  get pos() {\n    return this.position;\n  }\n\n  get noWizard() {\n    return this._noWizard;\n  }\n\n  get currentIndex() {\n    return this.current;\n  }\n\n  get style() {\n    if (!this.domStyle) {\n      return null;\n    }\n    return {\n      width: `${this.domStyle.width}px`,\n      height: `${this.domStyle.height > document.body.clientHeight ? document.body.clientHeight : this.domStyle.height}px`,\n      'border-width': `${this.domStyle.borderTop}px ${this.domStyle.borderRight}px \\\n        ${this.domStyle.borderBottom}px ${this.domStyle.borderLeft}px`\n    };\n  }\n\n  get button() {\n    if (this.config && this.tipStyle) {\n      this.tipStyle.width = `${this.config.tipWidth}px`;\n      this.tipStyle.height = `${this.config.tipHeight}px`;\n    }\n    return this.tipStyle;\n  }\n\n  constructor() { }\n\n  ngOnInit() {\n    if (!this.config) {\n      this._noWizard = true;\n    }\n    fromEvent(window, 'resize').subscribe(() => this.detect());\n  }\n\n  close(store: boolean) {\n    this._noWizard = true;\n    if (store && this.config.skipForever) {\n      LocalStorageHelper.store(`${this.config.skipKey}`, true);\n    }\n  }\n\n  change(index: number) {\n    this.stepChange.emit({\n      prev: this.current, next: index\n    });\n    this.current = index;\n    setTimeout(() => this.detect());\n  }\n\n  ngOnDestroy() {\n    cancelAnimationFrame(this.detector);\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (changes.config && changes.config.currentValue) {\n      this.update();\n    }\n  }\n\n  private update() {\n    this.config = merge(cloneDeep(defaultConfig), this.config);\n    this._noWizard = (this.config.steps && this.config.steps.length) ?\n      (this.config.skipForever ? (LocalStorageHelper.get(this.config.skipKey) ? true : false) : false)\n      : true;\n    if (!this.noWizard) {\n      this.detectElement();\n    }\n  }\n\n  private detect() {\n    if (this.config && this.config.steps && this.config.steps.length && this.current < this.config.steps.length) {\n      const elem = document.querySelector(this.config.steps[this.current].id);\n      if (elem) {\n        const bounding = elem.getBoundingClientRect();\n        const scroller = this.config.scroller;\n        if (!this.scrollToPosition(bounding, scroller) && this.retryCount < 3) {\n          this.retryCount++;\n          setTimeout(() => this.detect());\n          return;\n        }\n        this.retryCount = 0;\n        this.calcDom(bounding);\n        this.calcTipDom(bounding);\n      } else {\n        this.detectElement();\n      }\n    }\n  }\n\n  private detectElement() {\n    this.detector = requestAnimationFrame(this.detect.bind(this));\n  }\n\n  private calcDom(bounding: any) {\n    this.domStyle = {\n      width: bounding.width + 2 * this.config.boundaryWidth,\n      height: bounding.height + 2 * this.config.boundaryWidth,\n      borderTop: this.limitToPositive(bounding.top - this.config.boundaryWidth),\n      borderLeft: this.limitToPositive(bounding.left - this.config.boundaryWidth),\n      borderBottom: this.limitToPositive(document.body.clientHeight - bounding.top - bounding.height - this.config.boundaryWidth),\n      borderRight: this.limitToPositive(document.body.clientWidth - bounding.left - bounding.width - this.config.boundaryWidth)\n    };\n  }\n\n  prev() {\n    const tmp = this.current;\n    this.current--;\n    if (this.current < 0) {\n      this.current = 0;\n    }\n    const callback = this.config.steps[tmp].prev;\n    if (callback) {\n      callback();\n    }\n    this.stepChange.emit({\n      prev: tmp, next: this.current\n    });\n    setTimeout(() => {\n      this.carousel.goTo(this.current);\n      this.detect();\n    });\n  }\n\n  next() {\n    const tmp = this.current;\n    this.current++;\n    if (this.current >= this.config.steps.length) {\n      this.current = this.config.steps.length - 1;\n    }\n    const callback = this.config.steps[tmp].next;\n    if (callback) {\n      callback();\n    }\n    this.stepChange.emit({\n      prev: tmp, next: this.current\n    });\n    setTimeout(() => {\n      this.carousel.goTo(this.current);\n      this.detect();\n    });\n  }\n\n  private calcTipDom(bounding: any) {\n    const topSpace = bounding.top - 2 * this.config.boundaryWidth - this.arrowWidth - this.config.tipHeight;\n    const bottomSpace = document.body.clientHeight - 2 * this.config.boundaryWidth\n      - bounding.top - bounding.height - this.arrowWidth - this.config.tipHeight;\n    const leftSpace = bounding.left - 2 * this.config.boundaryWidth - this.arrowWidth - this.config.tipWidth;\n    const rightSpace = document.body.clientWidth - 2 * this.config.boundaryWidth - bounding.left\n      - bounding.width - this.arrowWidth - this.config.tipWidth;\n    const spaces = this.config.priority.map(p => {\n      let space;\n      switch (p) {\n        case TipDirection.BOTTOM:\n          space = bottomSpace;\n          break;\n        case TipDirection.TOP:\n          space = topSpace;\n          break;\n        case TipDirection.LEFT:\n          space = leftSpace;\n          break;\n        case TipDirection.RIGHT:\n          space = rightSpace;\n          break;\n      }\n      return { direction: p, space };\n    });\n    const bundle = spaces.find(s => s.space >= 0);\n    this.position = bundle ? bundle.direction : TipDirection.BOTTOM;\n    switch (bundle.direction) {\n      case TipDirection.TOP:\n        this.tipStyle = {\n          left: `${this.limitTipInWindow(this.domStyle.borderLeft, document.body.clientWidth, this.config.tipWidth)}px`,\n          top: `${this.limitTipInWindow(this.domStyle.borderTop - this.config.tipHeight - this.arrowWidth,\n            document.body.clientHeight, this.config.tipHeight)}px`\n        };\n        break;\n      case TipDirection.RIGHT:\n        this.tipStyle = {\n          left: `${this.limitTipInWindow(this.domStyle.borderLeft + this.domStyle.width + this.arrowWidth,\n            document.body.clientWidth, this.config.tipWidth)}px`,\n          top: `${this.limitTipInWindow(this.domStyle.borderTop,\n            document.body.clientHeight, this.config.tipHeight)}px`\n        };\n        break;\n      case TipDirection.BOTTOM:\n        this.tipStyle = {\n          left: `${this.limitTipInWindow(this.domStyle.borderLeft,\n            document.body.clientWidth, this.config.tipWidth)}px`,\n          top: `${this.limitTipInWindow(this.domStyle.borderTop + this.domStyle.height + this.arrowWidth,\n            document.body.clientHeight, this.config.tipHeight)}px`\n        };\n        break;\n      case TipDirection.LEFT:\n        this.tipStyle = {\n          left: `${this.limitTipInWindow(this.domStyle.borderLeft - this.arrowWidth - this.config.tipWidth,\n            document.body.clientWidth, this.config.tipWidth)}px`,\n          top: `${this.limitTipInWindow(this.domStyle.borderTop,\n            document.body.clientHeight, this.config.tipHeight)}px`\n        };\n        break;\n      default:\n        console.log('no place');\n        break;\n    }\n  }\n\n  private limitToPositive(n: number) {\n    if (n < 0) {\n      return 0;\n    }\n    return n;\n  }\n\n  private limitTipInWindow(n: number, limit?: number, addon?: number) {\n    if (n < 0) {\n      return 0;\n    }\n    if (limit && addon && n + addon > limit) {\n      return limit - addon;\n    }\n    return n;\n  }\n\n\n  private scrollToPosition(bounding: any, scroller: any, addon?: number) {\n    if (scroller) {\n      const height = bounding.top + bounding.height + this.config.boundaryWidth + this.config.scrollBottomOffset + (addon || 0);\n      if (addon) {\n        const del = height - /*document.body.clientHeight*/scroller.clientHeight;\n        if (scroller.scrollTop > del) {\n          scroller.scrollTop -= del;\n          return false;\n        }\n      }\n      const scBounding = scroller.getBoundingClientRect();\n      if (bounding.top - this.config.scrollTopOffset > scBounding.top /*0*/ && height > scroller.clientHeight) {\n        const delta = height + 1 - scroller.clientHeight;\n        scroller.scrollTop += delta;\n        return false;\n      }\n      if (bounding.top - this.config.scrollTopOffset < scBounding.top) {\n        scroller.scrollTop -= bounding.top - this.config.scrollTopOffset;\n        return false;\n      }\n    }\n    return true;\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { WizardComponent } from './wizard.component';\nimport { CommonModule } from '@angular/common';\nimport { NzCarouselModule, NzButtonModule, NzGridModule } from 'ng-zorro-antd';\n\n@NgModule({\n  declarations: [WizardComponent],\n  imports: [\n    CommonModule, NzCarouselModule, NzButtonModule, NzGridModule\n  ],\n  exports: [WizardComponent]\n})\nexport class WizardModule { }\n"],"names":[],"mappings":"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"}
